# HTTPNetwork_Message_Header

### 1) HTTP 헤더 필드

HTTP 프로토콜의 리퀘스트와 리스폰스에는 반드시 메시지 헤더가 포함되어있습니다. 메시지 헤더에는 클라이언트나 서버가 리퀘스트나 리스폰스를 처리하기 위한 모든 정보가 들어가있습니다.

`헤더필드 명 : 필드 값`  구조로 되어있고, HTTP 헤더는 여러 개의 헤더 필드를 가질 수 있고, 필드는 여러 개의 필드 값을 가질 수 있습니다.

> HTTP 헤더 필드가 중복된 경우는 어떻게 될까
>
> HTTP 메시지 헤더 중에 같은 헤더 필드 명이 두 개 이상 있다면 브라우저에 따라 다르게 동작을 한다.

<br>

### 2) HTTP 헤더 필드 종류

HTTP 헤더 필드는 크게 4종류로 분류된다.

- 일반적 헤더 필드(General Header Fields)

  : 리퀘스트 메시지와 리스폰스 메시지 둘 다 사용되는 헤더

- 리퀘스트 헤더 필드(Request Header Fields)

  : 클라이언트 측에서 서버 측으로 송신된 리퀘스트 메시지에 사용되는 헤더로 리퀘스트의 부가적 정보와 클라이언트의 정보, 리스폰스의 콘텐츠에 관한 우선 순위 등을 부가합니다.

- 리스폰스 헤더 필드(Response Header Fields)

  : 서버 측에서 클라이언트 측으로 송신한 리스폰스 메시지에 사용되는 헤더로 리스폰스의 정보와 서버의 정보, 클라이언트의 추가 정보 요구 등을 부가합니다.

- 엔티티 헤더 필드(Entity Header Fields)

  : 리퀘스트 메시지와 리스폰스 메시지에 포함된 엔티티에 사용되는 헤더로 콘텐츠 갱신 시간 등의 엔티티에 관한 정보를 부가합니다.

<br>

### 3) 일반적 헤더 필드

- ##### Cache-Control

  : Cache-Control 헤더는 디렉티브로 물리는 명령을 사용하여 캐싱 동작을 지정합니다.

  - **Cache-Control: public**

    : Public 디렉티브가 사용되는 경우, 다른 유저에게도 돌려줄 수 있는 캐시를 해도 좋다는 것을 명시적으로 나타냅니다.

  - **Cache-Control: private**

    : Private 디렉티브가 사용되는 경우, 리스폰스는 특정 유저만을 대상으로 하고 있다는 것을 나타냅니다.

  - **Cache-Control: no-cache**

    : no-cache 디렉티브는 캐시로부터 오래된 리소스가 반환되는 것을 막기 위해 사용됩니다. 

    클라이언트의 리퀘스트로 no-cache 디렉티브가 사용된 경우, 캐시된 리스폰스를 클라이언트가 받아 들이지 않음을 나타내고, 중간 캐시 서버가 오리진 서버까지 리퀘스ㅡ를 전송해야 합니다.

    서버의 리스폰스에 no-cache 디렉티브가 사용된 경우, 캐시 서버는 리소스를 저장할 수 없습니다. 오리진 서버는 캐시 서버가 이후의 리퀘스트에서 리소스의 유효성을 재확인하지 않고는 그 리스폰스를 사용하지 못하도록 합니다.

  - **Cache-Control: no-store**

    : no-store 디렉티브가 사용된 경우, 리퀘스트 혹은 리스폰스에 기밀 정보가 포함되어 있음을 나타냅니다. 그렇기 때문에 캐시는 로컬 스토리지에 저장을 해서는 안되도록 지정합니다.

  - **Cache-Control: s-maxage**

    : s-maxage 디렉티브는 max-age 디렉티브와 동일한데 다른 점을 여러 유저가 이용할 수 있는 공유 캐시 서버에만 적용됩니다.

    또, s-maxage 디렉티브가 사용되는 경우, Expires 헤더 필드와 max-age 디렉티브는 무시됩니다.

  - **Cache-Control: max-age**

    : 클라이언트의 리퀘스트로 max-age 디렉티브가 사용되었다면, 지정되었던 값보다 새로운 경우에는 캐시되었던 리소스를 받아들일 수 있습니다. 리스폰스에서 max-age 디렉티브가 사용되었다면 캐시 서버가 유효성의 재확인을 하지 않고 리소스를 캐시에 보존해 두는 최대 시간을 나타냅니다.

    > HTTP/1.1 캐시 서버는 동시에 Expires 헤더 필드가 달린 경우에는 max-age 디렉티브가 우선순위를 가져가고, HTTP/1.0 캐시 서버는 Expires 헤더 필드가 우선 순위를 가져간다.

- ##### Connection

  : Connection 헤더 필드는 프록시에 더 이상 접속하지 않는 헤더 필드를 지정하고 지속적 접속을 관리합니다.

  `Connection: Upgrade` 는 Upgrade 헤더 필드를 더 이상 프록시에 전달하지 말라는 뜻입니다.

  또, HTTP/1.1 에서는 지속접 접속이 디폴트로 되어있어서 `Connection: Close` 를 통해 지속적 접속을 끊을 수 있습니다.

- ##### Date

  : Date 헤더 필드는 HTTP 메시지를 생성한 날짜를 나타냅니다.

- ##### Pragma

  : Pragma 헤더 필드는 HTTP/1.1 보다 오래된 버전에서 캐시를 제어하는 필드입니다.

  `Pragma: no-cache` 만 지정 가능합니다.

- ##### Trailer

  : Trailer 헤더 필드는 메시지 바디의 뒤에 기술되어 있는 헤더 필드를 미리 전달할 수 있습니다. HTTP/1.1에 구현되어 있는 `청크 전송 인코딩`을 사용하고 있는 경우에 사용 가능합니다.

- ##### Upgrade

  : Upgrade 헤더 필드는 HTTP 및 다른 프로토콜의 새로운 버전이 통신에 이용되는 경우에 사용됩니다.

- ##### Via

  : Via 헤더 필드는 클라이언트와 서버 간의 리퀘스트 혹은 리스폰스 메시지의 경로를 알기 위해서 사용됩니다.

   